webpackJsonp([17],{155:function(a,t,e){function n(a){e(476)}var i=e(37)(e(314),e(559),n,"data-v-c052b438",null);a.exports=i.exports},314:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["已制定","未制定","制定中"];t.default={name:"warehouseList",data:function(){return{lookAllPlans:!1,checked:1,defaultProps:{children:"children",label:"name"},pagination:{currentPage:1,pageSizes:[10,20,30,40,50],pageSize:10,total:0},allPlans:[],tableDataA:[],GoBack:!1,GoBackReason:"",list:[],checkAll:!1,checkedCities:[],cities:n,isIndeterminate:!0,select1:"",select2:"",select3:"",clientId:"",brandId:"",rangeId:"",stateId:"",dataRange:"",dataStartTime:"",dataEndTime:"",options1:[],options2:[],options3:[{id:"已制定",name:"已制定"},{id:"已提交",name:"已提交"},{id:"已审核",name:"已审核"},{id:"已下发",name:"已下发"},{id:"已删除",name:"已删除"}],options4:[],tableData:[],pages:0,AnyChanged:[]}},created:function(){var a=this,t=this;t.$axios.get(window.$config.HOST+"/baseInfoManagement/getBrandName",{customerId:void 0}).then(function(t){a.options2=t.data}).catch(function(a){console.log("获取品牌失败")}),t.$axios.get(window.$config.HOST+"/infoManagement/getRangeName",{brandId:void 0}).then(function(t){a.options4=t.data}).catch(function(a){console.log("获取系列信息失败")}),t.$axios.get(window.$config.HOST+"/baseInfoManagement/getCustomerName").then(function(t){a.options1=t.data}).catch(function(a){console.log("获取客户信息失败")}),console.log("到达这里了");var e={stage:"manage",customerId:void 0,brandId:void 0,rangeId:void 0,name:void 0,clothingLevelId:void 0,startDate:void 0,endDate:void 0};console.log(e),t.$axios.get(window.$config.HOST+"/planManagement/getPlanList",{params:e}).then(function(t){console.log("获取空搜索集成功"),a.tableData=[],t.data.forEach(function(t){console.log("dsadsa"),"已提交"===t.state&&a.tableData.push(t)}),a.pagination.total=t.data.length;var e=(a.pagination.currentPage-1)*a.pagination.pageSize,n=(a.pagination.currentPage-1)*a.pagination.pageSize;for(a.tableDataA=[];e-n<a.pagination.pageSize&&e<a.tableData.length;e++)a.tableDataA.push(a.tableData[e]);console.log(t.data)}).catch(function(a){console.log("获取空搜索集失败")})},methods:{lookAllPlan:function(){var a=this;if(1!=this.AnyChanged.length)return void this.$message({message:"请选择一项！",type:"warning"});var t={id:this.AnyChanged[0].id};this.$axios.get(window.$config.HOST+"/planManagement/getPlanTree",{params:t}).then(function(t){a.allPlans.push(t.data),console.log(a.allPlans),a.lookAllPlans=!0}).catch(function(t){a.$message({message:"获取总计划失败",type:"warning"})})},changeState:function(){getWareList()},handleSizeChange:function(a){this.pagination.pageSize=a,console.log("每页+"+this.pagination.pageSize),this.getWareList()},handleCurrentChange:function(a){this.pagination.currentPage=a,this.getWareList()},searchDetails:function(a){console.log(a),this.$router.push({name:"planMakeIndex",params:{flag:0,goback:"seriesPlanMake",client:a.customerName,brand:a.brandName,series:a.rangeName,id:a.planObjectId,plantype:a.type,planobj:a.planObject,TopPlan:!0===a.isRoot?0:a.parentId,TopPlanName:!0===a.isRoot?"根计划":a.parentName,planName:a.name,projectType:a.projectType,number:a.number,dataStart:a.startDate,dataEnd:a.endDate,productDate:a.productDate,productDateType:a.productDateType,productId:a.productId,proposal:a.proposal,note:a.note,description:a.description}})},changeDate:function(a){if(console.log(a),a){var t=a.getFullYear(),e=a.getMonth()+1;e=e<10?"0"+e:e;var n=a.getDate();n=n<10?"0"+n:n;var i=(a.getHours(),a.getMinutes());i=i<10?"0"+i:i;var o=a.getSeconds();return o=i<10?"0"+o:o,t+"-"+e+"-"+n}},getWareList:function(){var a=this,t=this;this.DataStartTime=t.changeDate(this.dataRange[0]),this.DataEndTime=t.changeDate(this.dataRange[1]);var e={stage:"manage",customerId:""===this.clientId?void 0:this.clientId,brandId:""===this.brandId?void 0:this.brandId,rangeId:""===this.rangeId?void 0:this.rangeId,name:void 0,clothingLevelId:void 0,startDate:this.DataStartTime,endDate:this.DataEndTime};console.log(e),t.$axios.get(window.$config.HOST+"/planManagement/getPlanList",{params:e}).then(function(t){console.log(t.data);var e=void 0;1===a.checked?e="已提交":2===a.checked?e="已审核":3===a.checked&&(e="已下发"),a.tableData=[],t.data.forEach(function(t){console.log("dsadsa"),t.state===e&&a.tableData.push(t)}),a.pagination.total=a.tableData.length;var n=(a.pagination.currentPage-1)*a.pagination.pageSize,i=(a.pagination.currentPage-1)*a.pagination.pageSize;for(a.tableDataA=[];n-i<a.pagination.pageSize&&n<a.tableData.length;n++)a.tableDataA.push(a.tableData[n])}).catch(function(a){})},isChanged:function(a){this.AnyChanged=a},GoBackCancel:function(){this.GoBack=!1},GoBackConfirm:function(){var a=this;this.AnyChanged.forEach(function(t){console.log(t);var e={id:t.id,reason:a.GoBackReason};console.log(e),a.$axios.get(window.$config.HOST+"/planManagement/failPlan",{params:e}).then(function(t){t.data>=0?a.$message({message:"操作成功",type:"success"}):a.$message({message:"操作失败",type:"error"})}).catch(function(t){a.$message({message:"操作失败!",type:"error"})})}),this.GoBack=!1},VerifyPass:function(){var a=this;if(0===this.AnyChanged.length)return void this.$message({message:"请至少选择一项！",type:"warning"});for(var t=0;t<this.AnyChanged.length;t++)this.$axios.get(window.$config.HOST+"/planManagement/passPlan",{params:{id:this.AnyChanged[t].id}}).then(function(t){console.log(t.data),t.data>=0?a.$message({message:"操作成功",type:"success"}):a.$message({message:"操作失败",type:"error"})}).catch(function(t){a.$message({message:"操作失败!",type:"error"})})},VerifyRebut:function(){if(0===this.AnyChanged.length)return void this.$message({message:"请至少选择一项！",type:"warning"});this.GoBack=!0},CancelVerify:function(){var a=this;if(0===this.AnyChanged.length)return void this.$message({message:"请至少选择一项！",type:"warning"});for(var t=0;t<this.AnyChanged.length;t++)this.$axios.get(window.$config.HOST+"/planManagement/cancelPassPlan",{params:{id:this.AnyChanged[t].id}}).then(function(t){t.data>=0?a.$message({message:"操作成功",type:"success"}):a.$message({message:"操作失败",type:"error"})}).catch(function(t){a.$message({message:"操作失败!",type:"error"})})},handleCheckAllChange:function(a){this.checkedCities=a?n:[],this.isIndeterminate=!1},check:function(a){var t=this;a.forEach(function(a){t.index.push(a)})},handleCheckedCitiesChange:function(a){var t=a.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length}}}},429:function(a,t,e){t=a.exports=e(123)(!0),t.push([a.i,".box-card[data-v-c052b438]{margin:20px 50px;padding:0 20px}.box-card .bar[data-v-c052b438]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.box-card .bar .title[data-v-c052b438]{font-size:14px;min-width:75px;text-align:center}.box-card .bar .el-input[data-v-c052b438],.box-card .bar .el-select[data-v-c052b438]{width:300px;min-width:75px}.box-card .block[data-v-c052b438]{padding:30px 0;text-align:center}","",{version:3,sources:["/home/titanxu/Desktop/planui/src/page/planManagement/planVerify.vue"],names:[],mappings:"AACA,2BACE,iBAAkB,AAClB,cAAgB,CACjB,AACD,gCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,UAAY,CACb,AACD,uCACE,eAAgB,AAChB,eAAgB,AAChB,iBAAmB,CACpB,AAKD,qFAHE,YAAa,AACb,cAAgB,CAKjB,AACD,kCACE,eAAgB,AAChB,iBAAmB,CACpB",file:"planVerify.vue",sourcesContent:["\n.box-card[data-v-c052b438] {\n  margin: 20px 50px;\n  padding: 0 20px;\n}\n.box-card .bar[data-v-c052b438] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  width: 100%;\n}\n.box-card .bar .title[data-v-c052b438] {\n  font-size: 14px;\n  min-width: 75px;\n  text-align: center;\n}\n.box-card .bar .el-input[data-v-c052b438] {\n  width: 300px;\n  min-width: 75px;\n}\n.box-card .bar .el-select[data-v-c052b438] {\n  width: 300px;\n  min-width: 75px;\n}\n.box-card .block[data-v-c052b438] {\n  padding: 30px 0;\n  text-align: center;\n}\n"],sourceRoot:""}])},476:function(a,t,e){var n=e(429);"string"==typeof n&&(n=[[a.i,n,""]]),n.locals&&(a.exports=n.locals);e(124)("803cbdb6",n,!0)},559:function(a,t){a.exports={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"body"},[e("el-card",{staticClass:"box-card"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar"},[e("div",{staticClass:"title"},[a._v("客户名称")]),a._v(" "),e("el-select",{attrs:{clearable:""},model:{value:a.clientId,callback:function(t){a.clientId=t},expression:"clientId"}},a._l(a.options1,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}))],1)]),a._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar"},[e("div",{staticClass:"title"},[a._v("品牌")]),a._v(" "),e("el-select",{attrs:{clearable:""},model:{value:a.brandId,callback:function(t){a.brandId=t},expression:"brandId"}},a._l(a.options2,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}))],1)]),a._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar",staticStyle:{"margin-top":"10px"}},[e("el-radio-group",{on:{change:a.changeState},model:{value:a.checked,callback:function(t){a.checked=t},expression:"checked"}},[e("el-radio",{attrs:{label:1}},[a._v("已提交")]),a._v(" "),e("el-radio",{attrs:{label:2}},[a._v("已审核")]),a._v(" "),e("el-radio",{attrs:{label:3}},[a._v("已下发")])],1)],1)])],1),a._v(" "),e("el-row",{staticStyle:{"margin-top":"25px","margin-bottom":"5px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar"},[e("div",{staticClass:"title"},[a._v("新建时间")]),a._v(" "),e("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:a.dataRange,callback:function(t){a.dataRange=t},expression:"dataRange"}})],1)]),a._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"bar"},[e("div",{staticClass:"title"},[a._v("系列名称")]),a._v(" "),e("el-select",{attrs:{clearable:""},model:{value:a.rangeId,callback:function(t){a.rangeId=t},expression:"rangeId"}},a._l(a.options4,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a.id}})}))],1)]),a._v(" "),e("el-col",{attrs:{offset:0,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:a.getWareList}},[a._v("查询")])],1)])],1)],1),a._v(" "),e("el-card",{staticClass:"box-card"},[e("el-row",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:a.VerifyPass}},[a._v("审核通过")])],1)]),a._v(" "),e("el-col",{attrs:{offset:1,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:a.VerifyRebut}},[a._v("审核驳回")])],1)]),a._v(" "),e("el-col",{attrs:{offset:1,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:a.CancelVerify}},[a._v("取消审核")])],1)]),a._v(" "),e("el-col",{attrs:{offset:1,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:a.lookAllPlan}},[a._v("查看总计划")])],1)])],1),a._v(" "),e("br"),a._v(" "),e("hr"),a._v(" "),e("br"),a._v(" "),e("div",[e("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:a.tableDataA,"max-height":"400",border:"",stripe:!0,"highlight-current-row":!0},on:{"selection-change":a.isChanged}},[e("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"number",label:"预测编号",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"customerName",label:"客户名称",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"brandName",label:"品牌",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"name",label:"计划名称",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"rangeName",label:"系列名称",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"planObject",label:"计划对象",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"projectType",label:"项目类型",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"startDate",label:"计划开始",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"endDate",label:"计划结束",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{prop:"state",label:"审核状态",align:"center"}}),a._v(" "),e("el-table-column",{attrs:{fixed:"right",width:"100",label:"操作",align:"center"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){a.searchDetails(t.row)}}},[a._v("查看详情")])]}}])})],1),a._v(" "),e("div",{staticClass:"block"},[e("el-pagination",{attrs:{"current-page":a.pagination.currentPage,"page-sizes":a.pagination.pageSizes,"page-size":a.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:a.pagination.total},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange,"update:currentPage":function(t){a.$set(a.pagination,"currentPage",t)}}})],1)],1),a._v(" "),e("el-dialog",{attrs:{title:"驳回理由",visible:a.GoBack,modal:!1},on:{"update:visible":function(t){a.GoBack=t}}},[e("div",{staticClass:"body"},[e("el-row",{attrs:{gutter:20}},[e("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:a.GoBackReason,callback:function(t){a.GoBackReason=t},expression:"GoBackReason"}})],1),a._v(" "),e("el-row",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:a.GoBackConfirm}},[a._v("确认")])],1)]),a._v(" "),e("el-col",{attrs:{offset:1,span:2}},[e("div",{staticClass:"bar"},[e("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:a.GoBackCancel}},[a._v("取消")])],1)])],1)],1)]),a._v(" "),e("el-dialog",{attrs:{title:"查看总计划",visible:a.lookAllPlans,modal:!1},on:{"update:visible":function(t){a.lookAllPlans=t}}},[e("div",{staticClass:"body"},[e("el-tree",{attrs:{data:a.allPlans,props:a.defaultProps},on:{"node-click":a.handleNodeClick}})],1)])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=17.48e3ff735c51b76def36.js.map