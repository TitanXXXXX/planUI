webpackJsonp([20],{151:function(e,a,t){function n(e){t(453)}var i=t(37)(t(310),t(522),n,"data-v-3ee56dcc",null);e.exports=i.exports},310:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{isVerifiedPlan:!0,searchOptions:{searchParams:{userName:""},options:{userNameOptions:[]}},totalTableData:[],tableData:[],tableMultpleSelection:[],pagination:{currentPage:1,pageSizes:[10,20,30,40,50],pageSize:10,total:0}}},created:function(){var e=this,a=this;a.$axios.get(window.$config.HOST2+"/getAllUserName").then(function(t){t.data.errcode<0&&a.$message.error("下发对象加载失败!"),e.searchOptions.options.userNameOptions=t.data}).catch(function(e){a.$message.error("下发对象加载失败!")});var t={stage:"distribute"};this.$axios.get(window.$config.HOST+"/planManagement/getPlanList",{params:t}).then(function(a){console.log("初始化加载下发计划成功"),a.data.forEach(function(a){"已审核"===a.state&&e.totalTableData.push(a)}),e.pagination.total=e.totalTableData.length,e.pagination.currentPage=1;var t=(e.pagination.currentPage-1)*e.pagination.pageSize,n=t+e.pagination.pageSize>e.pagination.total?e.pagination.total:t+e.pagination.pageSize;e.tableData=e.totalTableData.slice(t,n)}).catch(function(e){console.log("初始化加载计划列表获取错误")})},methods:{planTypeSwitchChange:function(){this.handleSearch()},handleSearch:function(){var e=this,a={stage:"distribute"};this.$axios.get(window.$config.HOST+"/planManagement/getPlanList",{params:a}).then(function(a){console.log("初始化加载下发计划成功"),e.totalTableData=[],a.data.forEach(function(a){e.isVerifiedPlan?"已审核"===a.state&&e.totalTableData.push(a):"已下发"===a.state&&e.totalTableData.push(a)}),e.pagination.total=e.totalTableData.length;var t=(e.pagination.currentPage-1)*e.pagination.pageSize,n=t+e.pagination.pageSize>e.pagination.total?e.pagination.total:t+e.pagination.pageSize;e.tableData=e.totalTableData.slice(t,n)}).catch(function(e){console.log("初始化加载计划列表获取错误")})},handleSizeChange:function(e){this.pagination.pageSize=e,console.log("每页 "+e+" 条"),this.pagination.currentPage=1,this.handleSearch()},handleCurrentChange:function(e){console.log("当前页: "+e),this.pagination.currentPage=e,this.handleSearch()},distributePlanClick:function(){var e=this,a=this;0===a.tableMultpleSelection.length?a.$message.error("请选择要删除的计划！"):a.searchOptions.searchParams.userName?this.tableMultpleSelection.forEach(function(t){e.$axios.post(window.$config.HOST+"/planManagement/distributePlan",{planId:t.id,executerIdList:""===e.searchOptions.searchParams.userName?null:e.searchOptions.searchParams.userName}).then(function(n){n.data<0?(a.$message.error(t.name+"下发失败!"),console.log(t.name+"下发失败!")):(console.log(t.name+"下发成功!"),e.handleSearch())}).catch(function(e){a.$message.error(t.name+"下发失败!"),console.log(t.name+"下发失败!")})}):a.$message.error("请选择下发对象！")},tableSelectionChange:function(e){this.tableMultpleSelection=e}}}},406:function(e,a,t){a=e.exports=t(123)(!0),a.push([e.i,".box-card[data-v-3ee56dcc]{margin:20px 50px;padding:0 20px}.box-card .bar[data-v-3ee56dcc]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%}.box-card .bar .title[data-v-3ee56dcc]{font-size:14px;min-width:75px;text-align:center}.box-card .bar .el-input[data-v-3ee56dcc],.box-card .bar .el-select[data-v-3ee56dcc]{width:300px;min-width:75px}.box-card .el-switch[data-v-3ee56dcc]{height:40px}.box-card .block[data-v-3ee56dcc]{padding:30px 0;text-align:center}","",{version:3,sources:["/home/titanxu/Desktop/planui/src/page/planManagement/planDistribute.vue"],names:[],mappings:"AACA,2BACE,iBAAkB,AAClB,cAAgB,CACjB,AACD,gCACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,yBAA0B,AACtB,sBAAuB,AACnB,mBAAoB,AAC5B,UAAY,CACb,AACD,uCACE,eAAgB,AAChB,eAAgB,AAChB,iBAAmB,CACpB,AAKD,qFAHE,YAAa,AACb,cAAgB,CAKjB,AACD,sCACE,WAAa,CACd,AACD,kCACE,eAAgB,AAChB,iBAAmB,CACpB",file:"planDistribute.vue",sourcesContent:["\n.box-card[data-v-3ee56dcc] {\n  margin: 20px 50px;\n  padding: 0 20px;\n}\n.box-card .bar[data-v-3ee56dcc] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  width: 100%;\n}\n.box-card .bar .title[data-v-3ee56dcc] {\n  font-size: 14px;\n  min-width: 75px;\n  text-align: center;\n}\n.box-card .bar .el-input[data-v-3ee56dcc] {\n  width: 300px;\n  min-width: 75px;\n}\n.box-card .bar .el-select[data-v-3ee56dcc] {\n  width: 300px;\n  min-width: 75px;\n}\n.box-card .el-switch[data-v-3ee56dcc] {\n  height: 40px;\n}\n.box-card .block[data-v-3ee56dcc] {\n  padding: 30px 0;\n  text-align: center;\n}\n"],sourceRoot:""}])},453:function(e,a,t){var n=t(406);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t(124)("05e5728e",n,!0)},522:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-card",{staticClass:"box-card"},[t("div",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:5}},[t("el-switch",{staticClass:"el-switch",attrs:{"inactive-color":"#13ce66","active-text":"已审核计划","inactive-text":"已下发计划"},on:{change:e.planTypeSwitchChange},model:{value:e.isVerifiedPlan,callback:function(a){e.isVerifiedPlan=a},expression:"isVerifiedPlan"}})],1),e._v(" "),e.isVerifiedPlan?t("el-col",{attrs:{span:8}},[t("div",{staticClass:"bar"},[t("div",{staticClass:"title"},[e._v("下发对象")]),e._v(" "),t("el-select",{attrs:{clearable:""},model:{value:e.searchOptions.searchParams.userName,callback:function(a){e.$set(e.searchOptions.searchParams,"userName",a)},expression:"searchOptions.searchParams.userName"}},e._l(e.searchOptions.options.userNameOptions,function(e){return t("el-option",{key:e.id,attrs:{label:e.realName,value:e.id}})}))],1)]):e._e(),e._v(" "),e.isVerifiedPlan?t("el-col",{attrs:{span:3}},[t("div",{staticClass:"bar"},[t("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.distributePlanClick}},[e._v("下发计划")])],1)]):e._e()],1),e._v(" "),t("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,stripe:!0},on:{"selection-change":e.tableSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),e._v(" "),e._e(),e._v(" "),t("el-table-column",{attrs:{prop:"number",label:"预测编号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"customerName",label:"客户名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"brandName",label:"品牌",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"计划名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"rangeName",label:"系列名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"planObject",label:"计划对象",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"type",label:"项目类型",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createrName",label:"创建人",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}})],1)],1),e._v(" "),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.$set(e.pagination,"currentPage",a)}}})],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=20.87df32c8973054837bfe.js.map