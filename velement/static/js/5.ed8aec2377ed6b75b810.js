webpackJsonp([5],{153:function(e,t,a){function n(e){a(462)}var i=a(37)(a(312),a(534),n,"data-v-526481a4",null);e.exports=i.exports},206:function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},207:function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},208:function(e,t,a){(function(e,n){function i(e,a){var n={seen:[],stylize:r};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(a)?n.showHidden=a:a&&t._extend(n,a),C(n.showHidden)&&(n.showHidden=!1),C(n.depth)&&(n.depth=2),C(n.colors)&&(n.colors=!1),C(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),l(n,e,n.depth)}function o(e,t){var a=i.styles[t];return a?"["+i.colors[a][0]+"m"+e+"["+i.colors[a][1]+"m":e}function r(e,t){return e}function s(e){var t={};return e.forEach(function(e,a){t[e]=!0}),t}function l(e,a,n){if(e.customInspect&&a&&D(a.inspect)&&a.inspect!==t.inspect&&(!a.constructor||a.constructor.prototype!==a)){var i=a.inspect(n,e);return A(i)||(i=l(e,i,n)),i}var o=c(e,a);if(o)return o;var r=Object.keys(a),h=s(r);if(e.showHidden&&(r=Object.getOwnPropertyNames(a)),B(a)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return p(a);if(0===r.length){if(D(a)){var b=a.name?": "+a.name:"";return e.stylize("[Function"+b+"]","special")}if(y(a))return e.stylize(RegExp.prototype.toString.call(a),"regexp");if(w(a))return e.stylize(Date.prototype.toString.call(a),"date");if(B(a))return p(a)}var f="",v=!1,x=["{","}"];if(g(a)&&(v=!0,x=["[","]"]),D(a)){f=" [Function"+(a.name?": "+a.name:"")+"]"}if(y(a)&&(f=" "+RegExp.prototype.toString.call(a)),w(a)&&(f=" "+Date.prototype.toUTCString.call(a)),B(a)&&(f=" "+p(a)),0===r.length&&(!v||0==a.length))return x[0]+f+x[1];if(n<0)return y(a)?e.stylize(RegExp.prototype.toString.call(a),"regexp"):e.stylize("[Object]","special");e.seen.push(a);var C;return C=v?u(e,a,n,h,r):r.map(function(t){return d(e,a,n,h,t,v)}),e.seen.pop(),m(C,f,x)}function c(e,t){if(C(t))return e.stylize("undefined","undefined");if(A(t)){var a="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(a,"string")}return v(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,a,n,i){for(var o=[],r=0,s=t.length;r<s;++r)M(t,String(r))?o.push(d(e,t,a,n,String(r),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(e,t,a,n,i,!0))}),o}function d(e,t,a,n,i,o){var r,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),M(n,i)||(r="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=b(a)?l(e,c.value,null):l(e,c.value,a-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),C(r)){if(o&&i.match(/^\d+$/))return s;r=JSON.stringify(""+i),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=e.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=e.stylize(r,"string"))}return r+": "+s}function m(e,t,a){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?a[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+a[1]:a[0]+t+" "+e.join(", ")+" "+a[1]}function g(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function b(e){return null===e}function f(e){return null==e}function v(e){return"number"==typeof e}function A(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function C(e){return void 0===e}function y(e){return _(e)&&"[object RegExp]"===O(e)}function _(e){return"object"==typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===O(e)}function B(e){return _(e)&&("[object Error]"===O(e)||e instanceof Error)}function D(e){return"function"==typeof e}function P(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function O(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}function S(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;t.format=function(e){if(!A(e)){for(var t=[],a=0;a<arguments.length;a++)t.push(i(arguments[a]));return t.join(" ")}for(var a=1,n=arguments,o=n.length,r=String(e).replace(N,function(e){if("%%"===e)return"%";if(a>=o)return e;switch(e){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch(e){return"[Circular]"}default:return e}}),s=n[a];a<o;s=n[++a])b(s)||!_(s)?r+=" "+s:r+=" "+i(s);return r},t.deprecate=function(a,i){function o(){if(!r){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),r=!0}return a.apply(this,arguments)}if(C(e.process))return function(){return t.deprecate(a,i).apply(this,arguments)};if(!0===n.noDeprecation)return a;var r=!1;return o};var $,z={};t.debuglog=function(e){if(C($)&&($=a.i({NODE_ENV:"production"}).NODE_DEBUG||""),e=e.toUpperCase(),!z[e])if(new RegExp("\\b"+e+"\\b","i").test($)){var i=n.pid;z[e]=function(){var a=t.format.apply(t,arguments);console.error("%s %d: %s",e,i,a)}}else z[e]=function(){};return z[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=g,t.isBoolean=h,t.isNull=b,t.isNullOrUndefined=f,t.isNumber=v,t.isString=A,t.isSymbol=x,t.isUndefined=C,t.isRegExp=y,t.isObject=_,t.isDate=w,t.isError=B,t.isFunction=D,t.isPrimitive=P,t.isBuffer=a(207);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",S(),t.format.apply(t,arguments))},t.inherits=a(206),t._extend=function(e,t){if(!t||!_(t))return e;for(var a=Object.keys(t),n=a.length;n--;)e[a[n]]=t[a[n]];return e}}).call(t,a(6),a(18))},218:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={components:{},computed:{defaultActive:function(){var e=this;return e.$route.meta&&e.$route.meta.activePath||this.$route.path}}}},232:function(e,t,a){t=e.exports=a(123)(!0),t.push([e.i,".console-sidebar .el-submenu__title{font-size:12px;height:46px;line-height:46px}.console-sidebar .el-submenu{background:#37424f;border-bottom:1px solid #414d5c}.console-sidebar .el-submenu__icon-arrow{right:40px;margin-top:-4px}.console-sidebar .el-icon-message{font-size:12px}.console-sidebar .el-menu-item{font-size:12px;height:42px;line-height:42px}.console-sidebar .el-menu-item.is-active{border-right:none;color:#fff;background:#09c!important}.console-sidebar .el-menu-item.is-active:hover{background:#09c!important}","",{version:3,sources:["/home/titanxu/Desktop/planui/src/components/layout/consoleSidebar.vue"],names:[],mappings:"AACA,oCACE,eAAgB,AAChB,YAAa,AACb,gBAAkB,CACnB,AACD,6BACE,mBAAoB,AACpB,+BAAiC,CAClC,AACD,yCACE,WAAY,AACZ,eAAiB,CAClB,AACD,kCACE,cAAgB,CACjB,AACD,+BACE,eAAgB,AAChB,YAAa,AACb,gBAAkB,CACnB,AACD,yCACE,kBAAmB,AACnB,WAAY,AACZ,yBAA+B,CAChC,AACD,+CACE,yBAA+B,CAChC",file:"consoleSidebar.vue",sourcesContent:["\n.console-sidebar .el-submenu__title {\n  font-size: 12px;\n  height: 46px;\n  line-height: 46px;\n}\n.console-sidebar .el-submenu {\n  background: #37424f;\n  border-bottom: 1px solid #414d5c;\n}\n.console-sidebar .el-submenu__icon-arrow {\n  right: 40px;\n  margin-top: -4px;\n}\n.console-sidebar .el-icon-message {\n  font-size: 12px;\n}\n.console-sidebar .el-menu-item {\n  font-size: 12px;\n  height: 42px;\n  line-height: 42px;\n}\n.console-sidebar .el-menu-item.is-active {\n  border-right: none;\n  color: #fff;\n  background: #0099cc !important;\n}\n.console-sidebar .el-menu-item.is-active:hover {\n  background: #0099cc !important;\n}\n"],sourceRoot:""}])},233:function(e,t,a){t=e.exports=a(123)(!0),t.push([e.i,".console-sidebar[data-v-196e5850]{position:fixed;top:50px;bottom:0;background-color:#293038;z-index:102;overflow-x:hidden;overflow-y:auto;height:auto;width:180px}.console-sidebar .sidebar-content[data-v-196e5850]{width:200px;height:100%;overflow-x:hidden;overflow-y:auto;background:#293038}.console-sidebar .sidebar-content .sidebar-fold[data-v-196e5850]{height:30px;width:140px;background:#394555;color:#aeb9c2;text-align:left;padding:0 20px;line-height:30px!important;-ms-user-select:none;user-select:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none}","",{version:3,sources:["/home/titanxu/Desktop/planui/src/components/layout/consoleSidebar.vue"],names:[],mappings:"AACA,kCACE,eAAgB,AAChB,SAAU,AACV,SAAY,AACZ,yBAA0B,AAC1B,YAAa,AACb,kBAAmB,AACnB,gBAAiB,AACjB,YAAa,AACb,WAAa,CACd,AACD,mDACE,YAAa,AACb,YAAa,AACb,kBAAmB,AACnB,gBAAiB,AACjB,kBAAoB,CACrB,AACD,iEACE,YAAa,AACb,YAAa,AACb,mBAAoB,AACpB,cAAe,AACf,gBAAiB,AACjB,eAAgB,AAChB,2BAA6B,AAC7B,qBAAsB,AAClB,iBAAkB,AACtB,eAAgB,AAChB,yBAA0B,AAC1B,qBAAuB,CACxB",file:"consoleSidebar.vue",sourcesContent:["\n.console-sidebar[data-v-196e5850] {\n  position: fixed;\n  top: 50px;\n  bottom: 0px;\n  background-color: #293038;\n  z-index: 102;\n  overflow-x: hidden;\n  overflow-y: auto;\n  height: auto;\n  width: 180px;\n}\n.console-sidebar .sidebar-content[data-v-196e5850] {\n  width: 200px;\n  height: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  background: #293038;\n}\n.console-sidebar .sidebar-content .sidebar-fold[data-v-196e5850] {\n  height: 30px;\n  width: 140px;\n  background: #394555;\n  color: #aeb9c2;\n  text-align: left;\n  padding: 0 20px;\n  line-height: 30px !important;\n  -ms-user-select: none;\n      user-select: none;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n}\n"],sourceRoot:""}])},235:function(e,t,a){var n=a(232);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(124)("56a0ed3d",n,!0)},236:function(e,t,a){var n=a(233);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(124)("aeb216a2",n,!0)},242:function(e,t,a){function n(e){a(235),a(236)}var i=a(37)(a(218),a(243),n,"data-v-196e5850",null);e.exports=i.exports},243:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"console-sidebar"},[a("el-menu",{staticClass:"sidebar-content",attrs:{"unique-opened":!0,router:!0,"default-active":e.defaultActive,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[a("div",{staticClass:"sidebar-fold"},[e._v("计划服务-系列规划")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/quick'"}},[a("i",{staticClass:"el-icon-message"}),e._v("\n      快速入门\n    ")]),e._v(" "),a("el-submenu",{attrs:{index:"infoManagement"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-document"}),e._v("\n        信息管理\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/range/rangeManagement"}},[a("i",{staticClass:"el-icon-document"}),e._v("系列管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/styleGroup/styleGroupManagement"}},[a("i",{staticClass:"el-icon-document"}),e._v("款式组管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/style/styleManagement"}},[a("i",{staticClass:"el-icon-document"}),e._v("款式管理")])],2),e._v(" "),a("el-submenu",{attrs:{index:"planMake"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-document"}),e._v("\n        计划管理\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/planManagement"}},[a("i",{staticClass:"el-icon-document"}),e._v("进行中计划管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/commitedPlanManagement"}},[a("i",{staticClass:"el-icon-document"}),e._v("已完成计划管理")]),e._v(" "),a("el-submenu",{attrs:{index:"predictPlanManagement"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-document"}),e._v("\n          预测计划管理\n        ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/predictPlanToBeMake"}},[a("i",{staticClass:"el-icon-document"}),e._v("未制定计划")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/predictPlanMaking"}},[a("i",{staticClass:"el-icon-document"}),e._v("已制定计划")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/predictPlanMade"}},[a("i",{staticClass:"el-icon-document"}),e._v("已提交计划")])],2),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/planMake/planMakeIndex"}},[a("i",{staticClass:"el-icon-document"}),e._v("计划制定")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/planMake/seriesPlanMake"}},[a("i",{staticClass:"el-icon-document"}),e._v("系列计划制定")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/planMake/styleGroupPlanMake"}},[a("i",{staticClass:"el-icon-document"}),e._v("款式组计划制定")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/planMake/stylePlanMake"}},[a("i",{staticClass:"el-icon-document"}),e._v("款式计划制定")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/planVerify"}},[a("i",{staticClass:"el-icon-document"}),e._v("计划审核管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/planDistribute"}},[a("i",{staticClass:"el-icon-document"}),e._v("计划下发管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/planCompletionManage"}},[a("i",{staticClass:"el-icon-document"}),e._v("系列完成管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/planRecover"}},[a("i",{staticClass:"el-icon-document"}),e._v("计划回收站")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/exceptionManagement"}},[a("i",{staticClass:"el-icon-document"}),e._v("异常管理")])],2),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/messageManagement"}},[a("i",{staticClass:"el-icon-document"}),e._v("消息管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/queryStatistic"}},[a("i",{staticClass:"el-icon-document"}),e._v("查询统计")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/formManagement"}},[a("i",{staticClass:"el-icon-document"}),e._v("报表管理")]),e._v(" "),a("el-submenu",{attrs:{index:"backEnd"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message"}),e._v("\n        后管理模块\n      ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/backEndModule/planModelManagement"}},[a("i",{staticClass:"el-icon-document"}),e._v("计划模板管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/backEndModule/planModelEdit"}},[a("i",{staticClass:"el-icon-document"}),e._v("计划模板编辑")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/backEndModule/dictionary/productMana"}},[a("i",{staticClass:"el-icon-document"}),e._v("产品管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/backEndModule/dictionary/customerMana"}},[a("i",{staticClass:"el-icon-document"}),e._v("客户管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/backEndModule/dictionary/brandMana"}},[a("i",{staticClass:"el-icon-document"}),e._v("品牌管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/backEndModule/dictionary/clothingLevelMana"}},[a("i",{staticClass:"el-icon-document"}),e._v("服装类型管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/backEndModule/dictionary/dictionaryCateMana"}},[a("i",{staticClass:"el-icon-document"}),e._v("数据字典管理")]),e._v(" "),a("el-menu-item",{attrs:{index:"/planservice/backEndModule/privilegeManagement"}},[a("i",{staticClass:"el-icon-message"}),e._v("权限管理")])],2)],1)],1)},staticRenderFns:[]}},312:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(208),i=(a.n(n),a(242));a.n(i);t.default={data:function(){return{subPlanOrderModificationDialogVisible:!1,tableDataShow:[],isSelfMadePlan:!1,searchOptions:{searchParams:{customerName:"",brandName:"",clothingLevel:"",rangeName:"",name:"",dateRange:""},options:{customerNameOptions:[],brandNameOptions:[],clothingLevelOptions:[],rangeNameOptions:[],planNameOptions:[]}},tableData:[],pagination:{currentPage:1,pageSizes:[10,20,30,40,50],pageSize:10,total:0},selectedData:[],subPlanTableData:[]}},created:function(){var e=this;console.log("进入计划管理页面"),this.$axios.get(window.$config.HOST+"/baseInfoManagement/getCustomerName").then(function(t){e.searchOptions.options.customerNameOptions=t.data}).catch(function(e){console.log("初始化客户选项错误!")}),this.$axios.get(window.$config.HOST+"/baseInfoManagement/getClothingLevelName").then(function(t){e.searchOptions.options.clothingLevelOptions=t.data}).catch(function(e){console.log("初始化服装层次加载错误")}),this.$axios.get(window.$config.HOST+"/baseInfoManagement/getBrandName",{params:{customerId:""}}).then(function(t){e.searchOptions.options.brandNameOptions=t.data}).catch(function(e){console.log("初始化品牌名称选择错误")}),this.$axios.get(window.$config.HOST+"/infoManagement/getRangeName",{params:{brandId:""}}).then(function(t){e.searchOptions.options.rangeNameOptions=t.data}).catch(function(e){console.log("初始化系列名称加载错误")});this.$axios.get(window.$config.HOST+"/planManagement/getDistributedPlanList").then(function(t){e.tableData=t.data,e.tableData.forEach(function(e){e.isRoot&&(e.parentName="根计划")}),e.pagination.total=t.data.length;var a=(e.pagination.currentPage-1)*e.pagination.pageSize,n=(e.pagination.currentPage-1)*e.pagination.pageSize;for(e.tableDataShow=[];a-n<e.pagination.pageSize&&a<e.tableData.length;a++)e.tableDataShow.push(e.tableData[a]);e.searchOptions.options.planNameOptions=t.data}).catch(function(e){console.log("初始化被下发计划列表获取错误")})},methods:{ToSearchException:function(e){console.log("查看异常"+e.id),this.$router.push({name:"exceptionManagement",params:{planId:e.id,customerId:e.customerId,customerName:e.customerName,brandId:e.brandId,brandName:e.brandName,rangeId:e.rangeId,rangeName:e.rangeName}})},handleSizeChange:function(e){this.pagination.pageSize=e,console.log("每页+"+this.pagination.pageSize),this.handleSearch()},handleCurrentChange:function(e){this.pagination.currentPage=e,this.handleSearch()},addPlanChild:function(){if(1===this.selectedData.length){var e=this.selectedData[0],t={flag:1,goback:"planManagement",client:e.customerName,brand:e.brandName,series:e.rangeName,id:e.id,plantype:e.type,planobj:e.planObject,TopPlan:e.parentId,TopPlanName:e.parentName?e.parentName:"根计划",planName:e.name,projectType:e.projectType,number:e.number,dataStart:e.startDate,dataEnd:e.endDate,productDate:e.productDate,productDateType:e.productDateType,productId:e.productId,proposal:e.proposal,note:e.note,description:e.description};console.log(t),this.$router.push({name:"planMakeIndex",params:t})}else 0===this.selectedData.length?this.$message.error("请选择要添加子计划的计划！"):this.$message.error("仅允许对一条计划添加子计划，请重新选择！")},deletePlan:function(){var e=this;0===this.selectedData.length?this.$message.error("请选择要删除的计划！"):this.selectedData.forEach(function(t){console.log(t.id),e.deleteOnePlan(t.id)})},submitPlan:function(e){var t=this;this.$axios.get(window.$config.HOST+"/planManagement/submitPlan",{params:{id:e.id}}).then(function(a){a.data<0?(console.log(e.name+"提交失败(服务器)!"),t.$message.error(e.id+"提交失败!")):(t.$message({type:"success",message:e.id+"提交成功!"}),t.handleSearch())}).catch(function(a){console.log(e.name+"提交失败!"),t.$message.error(e.id+"提交失败!")})},changeSubPlanOrder:function(){var e=this;if(1===this.selectedData.length){var t={id:this.selectedData[0].id};console.log(t),this.$axios.get(window.$config.HOST+"/planManagement/getChildrenPlanList",{params:t}).then(function(t){e.subPlanTableData=t.data,e.subPlanTableData.sort(function(e,t){return e.order-t.order})}).catch(function(e){console.lopg("获取子计划列表失败")}),this.subPlanOrderModificationDialogVisible=!0}else 0===this.selectedData.length?this.$message.error("请选择要调整的计划！"):this.$message.error("仅允许对一条计划调整，请重新选择！")},subPlanOrderConfirm:function(){for(var e=this,t=[],a=this.subPlanTableData.length,n=0;n<a;n++)t.push({id:this.subPlanTableData[n].id,order:n});console.log(t),this.$axios.post(window.$config.HOST+"/planManagement/adjustPlanOrder",t).then(function(t){t.data<0?(console.log("顺序调整失败"),e.$message.error("顺序调整失败")):(console.log("顺序调整成功"),e.$message({type:"success",message:"调整成功!"}))}).catch(function(t){console.log("顺序调整请求失败"),e.$message.error("顺序调整失败")}),this.subPlanOrderModificationDialogVisible=!1},addException:function(){var e=this;0===this.selectedData.length?this.$message.error("请选择要添加异常的计划！"):this.$prompt("请输入计划出现的异常","异常信息添加",{confirmButtonText:"确定",cancelButttonText:"取消",inputPattern:/\S/,inputErrorMessage:"异常内容不得为空"}).then(function(t){var a=t.value;console.log(a),e.selectedData.forEach(function(t){var n={planId:t.id,cause:""===a?"":a};e.$axios.post(window.$config.HOST+"/planManagement/addException",n).then(function(a){a.data<0?e.$message.error(t.name+"添加异常失败"):e.$message({type:"success",message:t.name+"异常添加成功"})}).catch(function(a){e.$message.error(t.name+"添加异常失败")})})})},changeCheckBoxFun:function(e){this.selectedData=e},getPlanDetail:function(e){var t={flag:0,goback:"planManagement",client:e.customerName,brand:e.brandName,series:e.rangeName,id:e.id,plantype:e.type,planobj:e.planObject,TopPlan:e.parentId,TopPlanName:e.parentName?e.parentName:"根计划",planName:e.name,projectType:e.projectType,number:e.number,dataStart:e.startDate,dataEnd:e.endDate,productDate:e.productDate,productDateType:e.productDateType,productId:e.productId,proposal:e.proposal,note:e.note,description:e.description};console.log(t),this.$router.push({name:"planMakeIndex",params:t})},ModifyPlanDetail:function(e){var t={flag:1,goback:"planManagement",client:e.customerName,brand:e.brandName,series:e.rangeName,id:e.id,plantype:e.type,planobj:e.planObject,TopPlan:e.parentId,TopPlanName:e.parentName?e.parentName:"根计划",planName:e.name,projectType:e.projectType,number:e.number,dataStart:e.startDate,dataEnd:e.endDate,productDate:e.productDate,productDateType:e.productDateType,productId:e.productId,proposal:e.proposal,note:e.note,description:e.description};console.log(t),this.$router.push({name:"planMakeIndex",params:t})},deleteOnePlan:function(e){var t=this;console.log("删除 "+e),this.$axios.delete(window.$config.HOST+"/planManagement/deletePlan",{params:{id:e}}).then(function(a){a.data<0?(t.$message.error(e+"删除失败"),console.log("删除失败")):(t.handleSearch(),console.log("删除成功"),t.$message({type:"success",message:e+"删除成功"}))}).catch(function(a){t.$message.error(e+"删除失败")})},changeDate:function(e){if(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var n=e.getDate();return n=n<10?"0"+n:n,t+"-"+a+"-"+n}},handleSearch:function(){var e=this,t={customerId:""===this.searchOptions.searchParams.customerName?void 0:this.searchOptions.searchParams.customerName,brandId:""===this.searchOptions.searchParams.brandName?void 0:this.searchOptions.searchParams.brandName,rangeId:""===this.searchOptions.searchParams.rangeName?void 0:this.searchOptions.searchParams.rangeName,name:""===this.searchOptions.searchParams.name?void 0:this.searchOptions.searchParams.name,clothingLevelId:""===this.searchOptions.searchParams.name?void 0:this.searchOptions.searchParams.name,startDate:this.changeDate(this.searchOptions.searchParams.dateRange[0]),endDate:this.changeDate(this.searchOptions.searchParams.dateRange[1])};this.isSelfMadePlan?(t.stage="manage",console.log(t),this.$axios.get(window.$config.HOST+"/planManagement/getPlanList",{params:t}).then(function(t){e.tableData=t.data,e.tableData.forEach(function(e){e.isRoot&&(e.parentName="根计划")}),console.log(e.tableDataShow),e.pagination.total=t.data.length;var a=(e.pagination.currentPage-1)*e.pagination.pageSize,n=(e.pagination.currentPage-1)*e.pagination.pageSize;for(e.tableDataShow=[];a-n<e.pagination.pageSize&&a<e.tableData.length;a++)e.tableDataShow.push(e.tableData[a])}).catch(function(t){e.$message.error("搜索失败!")})):(console.log(t),this.$axios.get(window.$config.HOST+"/planManagement/getDistributedPlanList",{params:t}).then(function(t){e.tableData=t.data,e.tableData.forEach(function(e){e.isRoot&&(e.parentName="根计划")}),e.pagination.total=t.data.length;var a=(e.pagination.currentPage-1)*e.pagination.pageSize,n=(e.pagination.currentPage-1)*e.pagination.pageSize;for(e.tableDataShow=[];a-n<e.pagination.pageSize&&a<e.tableData.length;a++)e.tableDataShow.push(e.tableData[a])}).catch(function(t){e.$message.error("搜索失败!")}))},planTypeSwitchChange:function(){this.pagination.currentPage=1,this.tableData=[],this.handleSearch()},moveUp:function(e,t){var a=this;if(e>0){var n=a.subPlanTableData[e-1];a.subPlanTableData.splice(e-1,1),a.subPlanTableData.splice(e,0,n)}else alert("已经是第一条，不可上移")},moveDown:function(e,t){var a=this;if(e+1===a.subPlanTableData.length)alert("已经是最后一条，不可下移");else{console.log(e);var n=a.subPlanTableData[e+1];a.subPlanTableData.splice(e+1,1),a.subPlanTableData.splice(e,0,n)}}}}},415:function(e,t,a){t=e.exports=a(123)(!0),t.push([e.i,".Mtitle[data-v-526481a4]{font-size:3ch;margin-left:47%}.box-card[data-v-526481a4]{margin:20px 50px;padding:0 20px}.box-card .el-row[data-v-526481a4]{margin-bottom:20px}.box-card .el-row .bar[data-v-526481a4],.box-card .el-row[data-v-526481a4]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.box-card .el-row .bar .title[data-v-526481a4]{font-size:14px;width:90px;min-width:50px;text-align:center}.box-card .el-row .bar .el-input[data-v-526481a4],.box-card .el-row .bar .el-select[data-v-526481a4]{width:70%;min-width:80px;margin-left:20px}.box-card .block[data-v-526481a4]{padding:30px 0;text-align:center}","",{version:3,sources:["/home/titanxu/Desktop/planui/src/page/planManagement/planManagement.vue"],names:[],mappings:"AACA,yBACE,cAAe,AACf,eAAiB,CAClB,AACD,2BACE,iBAAkB,AAClB,cAAgB,CACjB,AACD,mCAWE,kBAAoB,CACrB,AACD,2EAZE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,8BAA+B,AAC/B,6BAA8B,AAC1B,uBAAwB,AACpB,mBAAoB,AAC5B,yBAA0B,AACtB,sBAAuB,AACnB,kBAAoB,CAc7B,AACD,+CACE,eAAgB,AAChB,WAAY,AACZ,eAAgB,AAChB,iBAAmB,CACpB,AAMD,qGACE,UAAW,AACX,eAAgB,AAChB,gBAAkB,CACnB,AACD,kCACE,eAAgB,AAChB,iBAAmB,CACpB",file:"planManagement.vue",sourcesContent:["\n.Mtitle[data-v-526481a4] {\n  font-size: 3ch;\n  margin-left: 47%;\n}\n.box-card[data-v-526481a4] {\n  margin: 20px 50px;\n  padding: 0 20px;\n}\n.box-card .el-row[data-v-526481a4] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  margin-bottom: 20px;\n}\n.box-card .el-row .bar[data-v-526481a4] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.box-card .el-row .bar .title[data-v-526481a4] {\n  font-size: 14px;\n  width: 90px;\n  min-width: 50px;\n  text-align: center;\n}\n.box-card .el-row .bar .el-input[data-v-526481a4] {\n  width: 70%;\n  min-width: 80px;\n  margin-left: 20px;\n}\n.box-card .el-row .bar .el-select[data-v-526481a4] {\n  width: 70%;\n  min-width: 80px;\n  margin-left: 20px;\n}\n.box-card .block[data-v-526481a4] {\n  padding: 30px 0;\n  text-align: center;\n}\n"],sourceRoot:""}])},462:function(e,t,a){var n=a(415);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(124)("0e8d65d6",n,!0)},534:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body"},[a("el-card",{staticClass:"box-card"},[a("el-row",{staticStyle:{"margin-top":"5px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[e._v("客户名称")]),e._v(" "),a("el-select",{attrs:{clearable:""},model:{value:e.searchOptions.searchParams.customerName,callback:function(t){e.$set(e.searchOptions.searchParams,"customerName",t)},expression:"searchOptions.searchParams.customerName"}},e._l(e.searchOptions.options.customerNameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[e._v("品牌")]),e._v(" "),a("el-select",{attrs:{clearable:""},model:{value:e.searchOptions.searchParams.brandName,callback:function(t){e.$set(e.searchOptions.searchParams,"brandName",t)},expression:"searchOptions.searchParams.brandName"}},e._l(e.searchOptions.options.brandNameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[e._v("服装层次")]),e._v(" "),a("el-select",{attrs:{clearable:""},model:{value:e.searchOptions.searchParams.clothingLevel,callback:function(t){e.$set(e.searchOptions.searchParams,"clothingLevel",t)},expression:"searchOptions.searchParams.clothingLevel"}},e._l(e.searchOptions.options.clothingLevelOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[e._v("系列名称")]),e._v(" "),a("el-select",{attrs:{clearable:""},model:{value:e.searchOptions.searchParams.rangeName,callback:function(t){e.$set(e.searchOptions.searchParams,"rangeName",t)},expression:"searchOptions.searchParams.rangeName"}},e._l(e.searchOptions.options.rangeNameOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px","margin-bottom":"5px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[e._v("计划名称")]),e._v(" "),a("el-select",{attrs:{clearable:""},model:{value:e.searchOptions.searchParams.name,callback:function(t){e.$set(e.searchOptions.searchParams,"name",t)},expression:"searchOptions.searchParams.name"}},e._l(e.searchOptions.options.planNameOptions,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1)]),e._v(" "),a("el-col",{attrs:{span:9}},[a("div",{staticClass:"bar"},[a("div",{staticClass:"title"},[e._v("添加时间")]),e._v(" "),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{type:"daterange","range-separator":"至","start-placeholde":"开始日期","end-placeholde":"结束日期",clearable:""},model:{value:e.searchOptions.searchParams.dateRange,callback:function(t){e.$set(e.searchOptions.searchParams,"dateRange",t)},expression:"searchOptions.searchParams.dateRange"}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-switch",{attrs:{"inactive-color":"#13ce66","active-text":"制定的计划","inactive-text":"被下发计划"},on:{change:e.planTypeSwitchChange},model:{value:e.isSelfMadePlan,callback:function(t){e.isSelfMadePlan=t},expression:"isSelfMadePlan"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1)],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("el-row",{attrs:{gutter:20}},[e.isSelfMadePlan?e._e():a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addPlanChild}},[e._v("添加子计划")])],1),e._v(" "),e.isSelfMadePlan?e._e():a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.changeSubPlanOrder}},[e._v("下级计划顺序调整")])],1),e._v(" "),e.isSelfMadePlan?e._e():a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addException}},[e._v("添加异常")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableDataShow,"max-height":"400",stripe:!0,"highlight-current-row":!0},on:{"selection-change":e.changeCheckBoxFun}},[a("el-table-column",{attrs:{width:"50",type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{width:"50",type:"index",label:"序号",align:"center"}}),e._v(" "),e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"计划编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"计划名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rangeNumber",label:"系列编号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"customerName",label:"客户名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"brandName",label:"品牌",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rangeName",label:"系列名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createrName",label:"添加人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"添加时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentName",label:"上级计划",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"异常状态",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.haveException?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.ToSearchException(t.row)}}},[e._v("有异常，查看")]):a("p",[e._v("无异常")])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.getPlanDetail(t.row)}}},[e._v("查看")]),e._v(" "),!e.isSelfMadePlan||"已制定"!==t.row.state&&"被驳回"!==t.row.state?e._e():a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.ModifyPlanDetail(t.row)}}},[e._v("修改")]),e._v(" "),!e.isSelfMadePlan||"已制定"!==t.row.state&&"被驳回"!==t.row.state?e._e():a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.submitPlan(t.row)}}},[e._v("提交")]),e._v(" "),!e.isSelfMadePlan||"已制定"!==t.row.state&&"被驳回"!==t.row.state?e._e():a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.deleteOnePlan(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pagination,"currentPage",t)}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"子计划顺序调整",visible:e.subPlanOrderModificationDialogVisible,modal:!1},on:{"update:visible":function(t){e.subPlanOrderModificationDialogVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.subPlanTableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"新顺序",width:"70px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"order",label:"原顺序",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"计划名称",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"number",label:"款号",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"开始日期",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endDate",label:"结束日期",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createrName",label:"创建人",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"部门名称",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建日期",width:"100px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",disabled:0===t.$index},on:{click:function(a){e.moveUp(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-arrow-up"})]),e._v(" "),a("el-button",{attrs:{size:"mini",disabled:t.$index===e.subPlanTableData.length-1},on:{click:function(a){e.moveDown(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-arrow-down"})])]}}])})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.subPlanOrderConfirm}},[e._v("确定")])],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=5.ed8aec2377ed6b75b810.js.map